# Step 1: Requirements - {project-name}

> Generated by @requirements agent | {date}

## Project Overview

| Field               | Value                                           |
| ------------------- | ----------------------------------------------- |
| Project Name        | {project-name}                                  |
| Project Type        | Infrastructure/Platform                         |
| Pattern             | {Landing Zone, Hub-Spoke, Migration Foundation} |
| Timeline            | {target date}                                   |
| Primary Stakeholder | {name/team}                                     |
| Business Context    | {brief description of business need}            |
| Repeatability       | {One-time, Repeatable template, Multi-tenant}   |

### Core Principles

- **Highly repeatable**: {customization approach}
- **Cost-optimized**: {cost vs. resilience trade-off}
- **Secure by default**: {governance approach}
- **CAF-aligned**: {naming and tagging standards}

## Functional Requirements

### Core Capabilities

List the core infrastructure capabilities required:

1. {Capability 1 - e.g., Hub-spoke network topology}
2. {Capability 2 - e.g., Server migration support}
3. {Capability 3 - e.g., Secure VM access}

### Network Topology

| Component      | Required | Configuration                |
| -------------- | -------- | ---------------------------- |
| Hub VNet       | Yes/No   | {address space, subnets}     |
| Spoke VNet     | Yes/No   | {address space, subnets}     |
| VNet Peering   | Yes/No   | {conditions}                 |
| NAT Gateway    | Yes/No   | {placement}                  |
| Azure Firewall | Yes/No   | {SKU}                        |
| VPN Gateway    | Yes/No   | {SKU, on-prem connectivity}  |
| Bastion        | Yes/No   | {SKU: Developer, Basic, Std} |

### Required Services

| Service   | Resource Group | Configuration  |
| --------- | -------------- | -------------- |
| {service} | {rg-name}      | {key settings} |

### Optional Services

| Service   | Resource Group | Deploy Condition           |
| --------- | -------------- | -------------------------- |
| {service} | {rg-name}      | {user prompt or condition} |

### Target Workloads

| Workload Type     | Description   | Estimated Count |
| ----------------- | ------------- | --------------- |
| {VMs, Containers} | {description} | {number}        |

## Non-Functional Requirements (NFRs)

### Availability & Reliability

| Metric          | Target           | Justification                  |
| --------------- | ---------------- | ------------------------------ |
| **SLA**         | {%} or N/A       | {reason}                       |
| **RTO**         | {hours} or N/A   | {reason}                       |
| **RPO**         | {hours} or N/A   | {reason}                       |
| Zone Redundancy | Required/Not Req | {cost vs resilience trade-off} |

### Performance

| Metric          | Target | Notes                   |
| --------------- | ------ | ----------------------- |
| Network latency | {ms}   | {between hub and spoke} |
| Throughput      | {Gbps} | {expected bandwidth}    |

### Scalability

| Dimension     | Current | Projected (12mo) |
| ------------- | ------- | ---------------- |
| Subscriptions | {count} | {count}          |
| VMs per sub   | {count} | {count}          |
| Total VMs     | {count} | {count}          |

## Compliance & Security Requirements

### Governance Model (Azure Policy)

| Policy Category | Enforcement | Examples/Built-in IDs         |
| --------------- | ----------- | ----------------------------- |
| Compute         | Deny/Audit  | {allowed SKUs, restrictions}  |
| Network         | Deny/Audit  | {public IP, NSG requirements} |
| Storage         | Deny/Audit  | {HTTPS, TLS, public access}   |
| Identity        | Deny/Audit  | {AAD-only, classic resources} |
| Tagging         | Deny/Audit  | {required tags}               |
| Location        | Deny        | {allowed regions}             |

### Required Tags

| Tag         | Required | Description               |
| ----------- | -------- | ------------------------- |
| Environment | Yes      | dev, staging, prod        |
| Owner       | Yes      | Customer/team responsible |
| {tag-name}  | Yes/No   | {purpose}                 |

### Data Residency

| Requirement      | Value          | Rationale              |
| ---------------- | -------------- | ---------------------- |
| Primary Region   | {region}       | {compliance, latency}  |
| Alternate Region | {region}       | {DR, quota}            |
| Data Sovereignty | {requirements} | {regulatory framework} |

### Network Security

- [ ] No public IPs on VMs
- [ ] NSG required on all subnets
- [ ] Deny RDP/SSH from internet
- [ ] Private endpoints for data services
- [ ] {other requirements}

## Budget

| Field          | Value                              |
| -------------- | ---------------------------------- |
| Monthly Budget | ${amount}                          |
| Budget Type    | Hard limit / Soft limit            |
| Cost Alerts    | Forecast at {%}, Anomaly detection |

> **Note**: The Azure Pricing MCP server generates detailed cost estimates during
> architecture assessment (Step 2).

### Cost Optimization Priorities

- [ ] Minimize compute costs (use B-series where possible)
- [ ] Prefer consumption-based pricing
- [ ] Reserved instances acceptable
- [ ] Spot instances acceptable for non-critical workloads
- [ ] No resilience requirements (cost savings)

## Operational Requirements

### Monitoring & Alerting

| Component          | Configuration                    |
| ------------------ | -------------------------------- |
| Log Analytics      | {daily cap, retention}           |
| Defender for Cloud | {tier: Free, P1, P2}             |
| Alerts             | {budget, security, availability} |

### Backup & Recovery

| Component | Backup      | Retention | Vault Location |
| --------- | ----------- | --------- | -------------- |
| VMs       | {frequency} | {days}    | {rg-name}      |

### Remote Access

| Method        | Configuration                     |
| ------------- | --------------------------------- |
| Azure Bastion | {SKU: Developer, Basic, Standard} |
| JIT VM Access | {Yes/No, Defender tier required}  |
| VPN           | {P2S, S2S, ExpressRoute}          |

### Resource Groups

| Purpose          | Name Pattern          |
| ---------------- | --------------------- |
| Hub networking   | rg-hub-{region}-001   |
| Spoke networking | rg-spoke-{region}-001 |
| {purpose}        | {pattern}             |

## Regional Preferences

| Field              | Value            | Rationale                     |
| ------------------ | ---------------- | ----------------------------- |
| Primary Region     | {region}         | {default: swedencentral}      |
| Alternate Region   | {region}         | {default: germanywestcentral} |
| Availability Zones | Required/Not Req | {cost vs resilience}          |

### Deploy-Time Parameters

Parameters that must be prompted at deployment:

| Parameter    | Type           | Description   |
| ------------ | -------------- | ------------- |
| {param-name} | {string, bool} | {description} |

### Out of Scope

Explicitly excluded from this implementation:

- {item 1}
- {item 2}

---

## Summary for Architecture Assessment

{Brief summary of key constraints, priorities, and recommended approach for the architect agent}

**Key Priorities**:

1. {priority 1}
2. {priority 2}
3. {priority 3}

**Critical Constraints**:

- {constraint 1}
- {constraint 2}

---

_Requirements captured using infrastructure/platform template_
